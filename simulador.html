<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de credito</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
   
    <!-- ESTILOS CSS -->
    <link rel="stylesheet" href="style.css">

   <script>
       function validar(){
            correo=document.getElementById("email").value;
            obligatorios=document.getElementsByClassName("obligatorios");
            soloNum=document.getElementsByClassName("soloNum");
            genero=document.getElementsByName("genero");
            zona=document.getElementsByName("zona");
            

            /*Validación de campos sin diligenciar*/
            for(i=0;i<obligatorios.length;i++){
                if (obligatorios[i].value===""){
                    alert("Faltan campos por llenar. Diligencie el campo "+ obligatorios[i].name);
                    obligatorios[i].focus();
                    return false;
                }
            }

            /*Validación del correo electronico*/        
            if(!(/\w{1,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/.test(correo))){
            alert("Debe de ingresar un correo electronico valido");
            document.getElementById("email").value;
            document.getElementById("email").focus();
            return false
            }

            /*Validación de caracteres nuemericos*/ 
            for(var i=0;i<soloNum.length;i++){
                if(isNaN(soloNum[i].value)|| soloNum[i].value===''){
                    alert("Ingrese caracteres numericos en el campo "+ soloNum[i].name);
                    soloNum[i].focus();
                    return false;
                }
            }
            
            /* VALIDACIÓN DEL INPUT TIPO RADIO PARA ELEGIR EL GENERO */
            var seleccion=false;
            for(var i=0;i<genero.length;i++){
                if(genero[i].checked){
                    seleccion=true;
                    break;
                }
            }
            if(seleccion==false){
                alert("Indique un género");
                genero[0].focus();
                return false;
            }

            /* VALIDACIÓN DEL INPUT TIPO RADIO PARA ELEGIR LA ZONA */
            seleccion=false;
            for(var i=0;i<zona.length;i++){
                if(zona[i].checked){
                    seleccion=true;
                    break;
                }
            }
            if(seleccion==false){
                alert("Indique zona");
                zona[0].focus();
                return false;
            }
            
        }/*Fin de la función validar()*/ 
       
       function calcular_periodos(){
            switch(box4){
                case "semanal": num_periodos=4*12*box2;
                    return num_periodos;
                break;
                case "quincenal": num_periodos=2*12*box2;
                    return num_periodos;
                break;
                case "mensual": num_periodos=12*box2;
                    return num_periodos;
                break;
            }
        }
       function calcular(){
            var num_periodos=0, interes_total=0, deuda_neta=0, valor_cuotas=0; 

            obligatorios2=document.getElementsByClassName("obligatorios2");
            soloNum2=document.getElementsByClassName("soloNum2");
            box1=parseInt(document.getElementById("monto").value);
            box2=document.getElementById("duracion").value;
            box3=document.getElementById("interes").value;
            box4=document.getElementById("periocidad").value;
            
            interes_total=parseInt(box1*box3/100);
            deuda_neta=parseInt(box1+interes_total);
            num_periodos=calcular_periodos();
            valor_cuotas=parseInt(deuda_neta/num_periodos);

        
            var ingresos_totales=document.getElementById("total_ingresos").value;
            var gastos_mensuales=document.getElementById("total_egresos").value;
            var capacidad_endeudamiento= ingresos_totales-gastos_mensuales;

            document.getElementById("box1").innerHTML = box1;
            document.getElementById("box2").innerHTML = box2 + (' meses');
            document.getElementById("box3").innerHTML = box3 + (' porciento');
            document.getElementById("box4").innerHTML = box4;
            document.getElementById("box5").innerHTML = (" $") + valor_cuotas;
            document.getElementById("box6").innerHTML = (" $") + deuda_neta;
            document.getElementById("box7").innerHTML = (" $") + interes_total;
            document.getElementById("box8").innerHTML =num_periodos;

            for(i=0;i<obligatorios2.length;i++){
                    if (obligatorios2[i].value===""){
                        alert("Faltan campos por llenar. Diligencie el campo "+ obligatorios2[i].name);
                        obligatorios2[i].focus();
                        return false;
                    }
                }

            /*Validación de caracteres nuemericos*/ 
            for(var i=0;i<soloNum2.length;i++){
                if(isNaN(soloNum2[i].value)|| soloNum2[i].value===''){
                    alert("Ingrese caracteres numericos en el campo "+ soloNum2[i].name);
                    soloNum2[i].focus();
                    return false;
                }
            }
            
            if(valor_cuotas>capacidad_endeudamiento){
                alert("El monto del crédito supera su capacidad de endeudamiento. Por favor modifique los terminos")
                document.getElementById("tabla").innerHTML="";
            }else{
                alert("Credito aprovado");
              var saldo=deuda_neta;
              var tabla="<tr><th>Periodo</th><th>Cuota</th><th>Saldo</th></tr><br>";
              for(var i=0;i<num_periodos;i++)
               {
                    if(i==num_periodos-1){
                    saldo=0;
                    }else{
                    saldo=parseInt(saldo-valor_cuotas);
                    }
                    tabla=tabla+"<tr><td>"+(i+1)+"</td><td>"+valor_cuotas+"</td><td>"+saldo+"</td></tr><br>";  
                
               }
               document.getElementById("tabla").innerHTML=tabla;  
            }
        }


   </script>
</head>
<body>
    <form action="" onsubmit="return validar()"> 
        <div class="container">
            <h1 class="text-center">Solicitud de crédito</h1> <br><br>
            <h2 class="text-left">Información General</h2> <br><br>
            <div class="row">
                <div class="col">
                    <label for="nombre1">PRIMER NOMBRE</label><br>
                    <input type="text" name="Primer nombre" id="nombre1" class="obligatorios"><br>
                    <label for="apellido1">PRIMER APELLIDO</label><br>
                    <input type="text" name="Primer apellido" id="apellido1" class="obligatorios"><br><br>

                    <label for="email">CORREO ELECTRONICO</label><br>
                    <input type="email" name="Correo" id="email" class="obligatorios"><br><br>

                    TIPO DE DOCUMENTO: 
                    <select  name="tipo_id" onchange=""><br>
                        <option value="nit">Nit</option>
                        <option value="cedula">Cedula de ciudadania</option>
                        <option value="pasaporte">Pasaporte</option>
                    </select><br><br>

                    <label for="fecha_nacimiento">FECHA DE NACIMIENTO</label>
                    <input type="text" name="fecha de Nacimiento" id="fecha_nacimiento" class="obligatorios"><br><br>

                    <label for="pais">PAIS DE ORIGEN </label>
                    <input type="text" name="pais" id="pais" class="obligatorios"><br><br>
                </div>

                <div class="col">
                    SEGUNDO NOMBRE<br>
                    <input type="text" name="Segundo Nombre" id="nombre2" class="obligatorios"><br>
                    SEGUNDO APELLIDO<br>
                    <input type="text" name="Segundo apellido" id="apellido2" class="obligatorios"><br><br>

                    GÉNERO: <br> <input type="radio" name="genero" id="masculino"> Masculino
                                 <input type="radio" name="genero" id="femenino"> Femenino<br><br>

                    NÚMERO DE DOCUMENTO:
                    <input type="text" name="Numero de Documento" id="indentificacion" class="obligatorios soloNum"><br><br>

                    FECHA DE EXPEDICIÓN DEL DOCUMENTO
                    <input type="text" name="Fecha de expedicion" id="fecha_expedicion" class="obligatorios"><br><br>
                </div>
            </div>
            
            <hr>
            <h2 class="text-left">Información personal y de estudios</h2> <br><br>

            <div class="row">
                <div class="col">
                    ESTADO CIVIL: 
                    <select  name="estado_civil" onchange=""><br>
                        <option value="soltero">Soltero</option>
                        <option value="casado">Casado</option>
                        <option value="divorciado">Divorciado</option>
                        <option value="viudo">Viudo</option>
                    </select><br><br>
                    OCUPACIÓN: 
                    <select  name="ocupacion" onchange=""><br>
                        <option value="empleado">Empleado</option>
                        <option value="estudiante">Estudiante</option>
                        <option value="independiente">Independiente</option>
                        <option value="pensionado">Pensionado</option>
                    </select><br><br>

                    NÚMERO CELULAR: <input name="Celular" type="text" id="celular" class="obligatorios"> <br><br>
                </div>

                <div class="col">
                  NÚMERO DE PERSONAS A CARGO: <input type="text" name="Personas a cargo" id="p_acargo" class="obligatorios soloNum"> <br><br>

                  ESTUDIOS: 
                    <select  name="estudios" onchange=""><br>
                        <option value="soltero">Primaria</option>
                        <option value="casado">Secundaria</option>
                        <option value="divorciado">Universidad</option>
                        <option value="viudo">Posgrado</option>
                    </select><br><br>

                    TELEFONO FIJO: <input type="text" name="Telefono fijo" class="obligatorios soloNum" id="telefono"> <br><br>
                </div>
            </div>
            <hr>
            <h2 class="text-left">Información de residencia</h2> <br><br>
            <div class="row">
                <div class="col">

                    TIPO DE RESIDENCIA 
                    <select name="residencia" id="residencia">
                        <option value="propia">Propia</option>
                        <option value="arrendada">Arrendada</option>
                        <option value="succidida">Succidiada</option>
                    </select><br><br>

                    ZONA DE RESIDENCIA: <br>
                    Urbana <input name="zona" class="zona" id="urbana" type="radio">
                    Rural <input name="zona" class="zona"  id="rural" type="radio">
                </div>
                <div class="col">
                   CIUDAD: <input type="text" id="ciudad" name="ciudad" class="obligatorios"> <br><br>
                   DIRECCIÓN: <input type="text" id="direccion" name="direccion" class="obligatorios"> <br>
                </div>
            </div>
            <hr>
            <h2 class="text-left">Información laboral y económica</h2> <br><br>
            <h3>Ingresos mensuales</h3>
            <div class="row">
               <div class="col">
                ACTIVIDAD ECONOMICA PRINCIPAL: 
                <select  name="actividad_economica" onchange=""><br>
                    <option value="empleado">Empleado</option>
                    <option value="independiente">Independiente</option>
                    <option value="pensionado">Pensionado</option>
                </select><br><br>
                OTRA ACTIVIDAD ECONOMICA</BR> 
                QUE LE GENERE INGRESOS: 
                <select  name="otras_actividades" onchange=""><br>
                    <option value="empleado">Empleado</option>
                    <option value="independiente">Independiente</option>
                    <option value="comerciante">Comerciante</option>
                    <option value="pensionado">Pensionado</option>
                </select><br><br>
                TOTAL DE INGRESOS MENSUALES: <input type="text" name="total de ingresos" id="total_ingresos" class="obligatorios"><BR><br>
                
                <hr>

               </div>

               <div class="col">
                    INGRESO PRINCIPAL: <input type="text" name="ingreso principal" id="ingreso_principal" class="obligatorios soloNum"> <br><br>
                    OTROS INGRESOS: <input type="text" name="otros ingresos" id="otros_ingresos" class="obligatorios soloNum"><br><br>
               </div>
            </div>
            <h3>Egresos mensuales</h3>
            <div class="row">
                <div class="col">
                CUOTAS DE OTROS PRESTAMOS: <input type="text" name="otros prestamos" class="obligatorios soloNum" id="otros_prestamos"> <br><br>
                OTROS GASTOS MENSUALES: <input type="text" name="otros gastos" id="otros_gastos" class="obligatorios soloNum"> <br><br>
                TOTAL DE EGRESOS: <input type="text" name="total egresos" id="total_egresos" class="obligatorios soloNum"> <br><br>
                </div>
            </div>
            <button type="submit" class="botones">Enviar</button> <br><br>
        </div>
        
    </form>
    <div class="box">
        <div class="head_box"><strong id=titulo_box>Terminos del credito</strong><br></div>
        <div class="body_box"> 
            <form action="" id="form2" onsubmit="return calcular()" class="text-dark">
                 Monto del crédito: <input type="text" size="6" placeholder="1000000" name="monto" id="monto" class="obligatorios2 soloNum2">$ <br>
                 Duración en años: <input type="text" size="1" placeholder="1" name="duracion" id="duracion" class="obligatorios2 soloNum2"><br>
                 Interes anual: <input type="text" size="1" placeholder="2" name="interes" id="interes" class="obligatorios2 soloNum2"> % <br>
                 Periocidad de pago: 
                 <select name="periocidad" id="periocidad">
                     <option value="semanal">semanal</option>
                     <option value="quincenal">quincenal</option>
                     <option value="mensual">mensual</option>
                 </select><br>
                <button type="button" onclick="calcular()" class="botones btn-block">calcular</button> 
             </form>
        </div>
    </div>

    <div class="box">
        <div class="head_box"><strong id=titulo_box>Resumen del credito</strong><br></div>
        <div class="body_box"> 
            Monto del crédito: <strong><span id=box1></span></strong><br>
            Duración del Crédito: <strong><span id=box2></span></strong><br>
            Interés anual: <strong><span id=box3></span></strong><br>
            Periosidad de pago: <strong><span id=box4></span></strong><br>
            <hr>
            Cuota: <strong><span id=box5></span></strong><br>
            Total a pagar: <strong><span id=box6></span></strong><br>
            Interés total: <strong><span id=box7></span></strong><br>
            Cantidad de periodos: <strong><span id=box8></span></strong><br>
        </div>
    </div>
    <table id="tabla">

    </table>
</body>
</html>